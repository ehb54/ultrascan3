# UltraScan III â€” Sphinx Documentation

The Sphinx-based system is used for generating UltraScan III documentation in:

- HTML (for browser viewing)
- PDF (via LaTeX)
- Qt Help (`.qch`, `.qhc` for Qt Assistant)

---

## Requirements

### 1. Python Packages

Install from `source/requirements.txt`:

```bash
pip install -r source/requirements.txt
```

### 2. System Tools

#### Qt Help Build Tools (included with Qt)

Building the Qt Help (`.qch`, `.qhc`) requires:

- `qhelpgenerator`
- `qcollectiongenerator`
- `assistant` (for local preview)

Qt is already a core prerequisite for UltraScan and should be installed as part of the main UltraScan build.

Ensure the Qt binaries are in your `PATH`.

## Building the PDF Manual 

### Prerequisites

You will need:

* full LaTeX distribution 

### macOS Setup

1. Install full MacTeX:

   ```bash
   brew install --cask mactex
   ```

2. Add TeX to your PATH:

   ```bash
   echo 'export PATH=/Library/TeX/texbin:$PATH' >> ~/.zprofile
   source ~/.zprofile
   ```

### Linux Setup (Ubuntu/Debian)

Install TeX Live Full:

```bash
sudo apt update
sudo apt install texlive-full latexmk -y
```

### Building the PDF

From the Sphinx documentation directory:

```bash
cd doc/manual/
make pdf
```

The generated PDF will be located at:

```
build/doc/manual/latex/UltraScanIII.pdf
```
### Troubleshooting

* Make sure you are using a full LaTeX distribution (MacTeX or texlive-full).

* If you've changed font configurations or installed new fonts, run:

  ```bash
  luaotfload-tool --update --force
  ```

## Building HTML and QT Help Documentation

Run all commands from: `doc/manual/`

### Build HTML

```bash
make html
```

Output: `build/doc/manual/html/`

### Build Qt Help

```bash
make qthelp
```

### Build Qt Help qhc file and copy to bin
```bash
make install
```

## Testing Documentation with Qt Assistant

After building your documentation, it's important to test it with Qt Assistant to ensure proper formatting and functionality:

1. Launch Qt Assistant:
   ```bash
   assistant -collectionFile bin/manual.qhc
   ```

2. Navigation Testing:
   - Verify all links work correctly
   - Check that images display properly
   - Ensure table of contents is complete and accurate
   - Test search functionality with common terms

3. Display Testing:
   - Test documentation at different window sizes
   - Verify that centered images remain properly aligned
   - Check that font sizes and styles are consistent
   - Ensure code examples are properly formatted

4. Content Validation:
   - Verify technical accuracy of all procedures
   - Ensure screenshots match the current software version
   - Check for any broken references or outdated information

For additional help, refer to the UltraScan support resources.

## Notes

- All output formats are built from the unified `source/` directory.
- Output locations:
  - HTML, LaTeX, Qthelp: `build/doc/manual/`
  - Qt Help binaries (`.qch`, `.qhc`): `bin/`

For Sphinx usage help, see: https://www.sphinx-doc.org


